!function(){"use strict";angular.module("app",["ui.router","app.ui","ui.bootstrap"]).config(["$stateProvider","$urlRouterProvider",function(t,e){e.otherwise("/projects"),t.state("login",{url:"/login",templateUrl:"partials/login/index.html",controller:"LoginController",controllerAs:"loginController"}).state("projects",{url:"/projects",templateUrl:"partials/projects/index.html",controller:"ProjectsController",controllerAs:"projectsController",resolve:{projects:["Projects","users",function(t,e){return t.get()}],users:["Users",function(t){return t.get()}]}}).state("projects.detail",{url:"/:projectId",templateUrl:"partials/projects/detail.html",controller:"ProjectController",controllerAs:"projectController",resolve:{project:["Projects","$stateParams","projects",function(t,e,r){return t.find(e.projectId)}]}}).state("projects.detail.edit",{url:"/edit",templateUrl:"partials/projects/edit.html",controller:"ProjectEditController",controllerAs:"projectEditController"})}])}(),function(){"use strict";angular.module("app.ui",[])}(),function(){"use strict";angular.module("app").controller("BodyController",["Projects",function(t){var e=this;e.welcome="Sup",t.get().then(function(r){e.projects=t.projects})}])}(),function(){"use strict";angular.module("app.ui").directive("projectsTable",function(){return{restrict:"EA",templateUrl:"partials/directives/projects-table.html",scope:{projects:"=",remove:"="}}})}(),function(){"use strict";angular.module("app").controller("LoginController",["Users",function(t){var e=this;e.creds={},e.login=t.login}])}(),function(){"use strict";angular.module("app").service("Projects",["$http","$state","Users",function(t,e,r){var o=this;o.projects=[],o.find=function(t){return _.find(o.projects,{_id:t})},o.get=function(){return t.get("/projects").then(function(t){return o.projects.splice(0),t.data.forEach(function(t){t.user=r.find(t.user),o.projects.push(t)}),o.projects})},o.put=function(r){var n={title:r.title,user:r.user._id};return t.put("/projects/"+r._id,n).then(function(t){var n=o.find(r._id);_.merge(n,r),e.go("projects.detail",{projectId:r._id})},function(t){})},o.remove=function(t){_.remove(o.projects,{_id:t})},o.del=function(r){return t["delete"]("/projects/"+r).then(function(t){o.remove(r),e.go("projects")})},o.post=function(e){return t.post("/projects/",e).then(function(t){t.data.user=r.find(t.data.user),o.projects.push(t.data)})}}])}(),function(){"use strict";angular.module("app").service("Users",["$http","User",function(t,e){var r=this;r.users=[],r.find=function(t){return _.find(r.users,{_id:t})},r.get=function(){return t.get("/users").then(function(t){return r.users.splice(0),t.data.forEach(function(t){r.users.push(new e(t))}),r.users})},r.login=function(e){return t.post("/login",e).then(function(t){console.log(t.data)},function(t){console.error(t)})}}])}(),function(){"use strict";angular.module("app.ui").filter("niceDate",function(){return function(t,e){e=e||"MMMM Do, YYYY";var r=moment(t);return r.format(e)}})}(),function(){"use strict";angular.module("app").factory("User",function(){function t(t){_.merge(this,{first_name:"",last_name:"",email:""},t||{})}return t.prototype={fullName:function(){return this.first_name+" "+this.last_name}},t})}(),function(){"use strict";angular.module("app").controller("NewProjectCtrl",["$scope","$modalInstance","Users",function(t,e,r){var o=this;o.users=r.users,o.project={user:""},o.close=function(){e.close(o.project)},o.dismiss=function(){e.dismiss()}}])}(),function(){"use strict";angular.module("app").controller("ProjectEditController",["project","Projects","Users",function(t,e,r){var o=this;o.users=r.users,o.project=t,o.projectCopy=_.clone(t),o.update=e.put}])}(),function(){"use strict";angular.module("app").controller("ProjectController",["project","Projects",function(t,e){var r=this;r.project=t,r.del=e.del}])}(),function(){"use strict";angular.module("app").controller("ProjectsController",["projects","Projects","$modal","$state","$rootScope",function(t,e,r,o,n){var s=this;s.projects=t,s.remove=e.del,s.addProject=function(t){r.open({templateUrl:"partials/projects/new.html",controller:"NewProjectCtrl",controllerAs:"newProject",size:"md"}).result.then(function(t){e.post(t)})}}])}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5tb2R1bGUuanMiLCJ1aS5tb2R1bGUuanMiLCJib2R5LmNvbnRyb2xsZXIuanMiLCJkaXJlY3RpdmVzL3Byb2plY3RzLXRhYmxlLmRpcmVjdGl2ZS5qcyIsImxvZ2luL2xvZ2luLmNvbnRyb2xsZXIuanMiLCJzZXJ2aWNlcy9wcm9qZWN0cy5zZXJ2aWNlLmpzIiwic2VydmljZXMvdXNlcnMuc2VydmljZS5qcyIsImZpbHRlcnMvZGF0ZS5maWx0ZXIuanMiLCJmYWN0b3JpZXMvdXNlci5mYWN0b3J5LmpzIiwicHJvamVjdHMvbmV3LXByb2plY3QuY29udHJvbGxlci5qcyIsInByb2plY3RzL3Byb2plY3QtZWRpdC5jb250cm9sbGVyLmpzIiwicHJvamVjdHMvcHJvamVjdC5jb250cm9sbGVyLmpzIiwicHJvamVjdHMvcHJvamVjdHMuY29udHJvbGxlci5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwiJHN0YXRlUHJvdmlkZXIiLCIkdXJsUm91dGVyUHJvdmlkZXIiLCJvdGhlcndpc2UiLCJzdGF0ZSIsInVybCIsInRlbXBsYXRlVXJsIiwiY29udHJvbGxlciIsImNvbnRyb2xsZXJBcyIsInJlc29sdmUiLCJwcm9qZWN0cyIsIlByb2plY3RzIiwidXNlcnMiLCJnZXQiLCJVc2VycyIsInByb2plY3QiLCIkc3RhdGVQYXJhbXMiLCJmaW5kIiwicHJvamVjdElkIiwidm0iLCJ0aGlzIiwid2VsY29tZSIsInRoZW4iLCJkaXJlY3RpdmUiLCJyZXN0cmljdCIsInNjb3BlIiwicmVtb3ZlIiwiY3JlZHMiLCJsb2dpbiIsInNlcnZpY2UiLCIkaHR0cCIsIiRzdGF0ZSIsIl8iLCJfaWQiLCJyZXMiLCJzcGxpY2UiLCJkYXRhIiwiZm9yRWFjaCIsInVzZXIiLCJwdXNoIiwicHV0IiwicHJvamVjdENvcHkiLCJ0aXRsZSIsInAiLCJtZXJnZSIsImdvIiwiZXJyIiwiZGVsIiwicG9zdCIsIlVzZXIiLCJ1c2VySWQiLCJjb25zb2xlIiwibG9nIiwiZXJyb3IiLCJmaWx0ZXIiLCJ0aW1lU3RhbXAiLCJmb3JtYXQiLCJtIiwibW9tZW50IiwiZmFjdG9yeSIsImZpcnN0X25hbWUiLCJsYXN0X25hbWUiLCJlbWFpbCIsInByb3RvdHlwZSIsImZ1bGxOYW1lIiwiJHNjb3BlIiwiJG1vZGFsSW5zdGFuY2UiLCJjbG9zZSIsImRpc21pc3MiLCJjbG9uZSIsInVwZGF0ZSIsIiRtb2RhbCIsIiRyb290U2NvcGUiLCJhZGRQcm9qZWN0Iiwib3BlbiIsInNpemUiLCJyZXN1bHQiXSwibWFwcGluZ3MiOiJDQUFBLFdBQ0EsWUFFQUEsU0FBQUMsT0FBQSxPQUFBLFlBQUEsU0FBQSxpQkFDQUMsUUFBQSxpQkFBQSxxQkFBQSxTQUFBQyxFQUFBQyxHQUVBQSxFQUFBQyxVQUFBLGFBRUFGLEVBQ0FHLE1BQUEsU0FDQUMsSUFBQSxTQUNBQyxZQUFBLDRCQUNBQyxXQUFBLGtCQUNBQyxhQUFBLG9CQUdBSixNQUFBLFlBQ0FDLElBQUEsWUFDQUMsWUFBQSwrQkFDQUMsV0FBQSxxQkFDQUMsYUFBQSxxQkFDQUMsU0FDQUMsVUFBQSxXQUFBLFFBQUEsU0FBQUMsRUFBQUMsR0FFQSxNQUFBRCxHQUFBRSxRQUdBRCxPQUFBLFFBQUEsU0FBQUUsR0FDQSxNQUFBQSxHQUFBRCxXQU1BVCxNQUFBLG1CQUNBQyxJQUFBLGNBQ0FDLFlBQUEsZ0NBQ0FDLFdBQUEsb0JBQ0FDLGFBQUEsb0JBQ0FDLFNBQ0FNLFNBQUEsV0FBQSxlQUFBLFdBQUEsU0FBQUosRUFBQUssRUFBQU4sR0FDQSxNQUFBQyxHQUFBTSxLQUFBRCxFQUFBRSxnQkFLQWQsTUFBQSx3QkFDQUMsSUFBQSxRQUNBQyxZQUFBLDhCQUNBQyxXQUFBLHdCQUNBQyxhQUFBLGdDQ2xEQSxXQUNBLFlBRUFWLFNBQUFDLE9BQUEsZ0JDRkEsV0FDQSxZQUNBRCxTQUFBQyxPQUFBLE9BQ0FRLFdBQUEsa0JBQUEsV0FBQSxTQUFBSSxHQUNBLEdBQUFRLEdBQUFDLElBQ0FELEdBQUFFLFFBQUEsTUFFQVYsRUFBQUUsTUFDQVMs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QUExRCxHQUNBd0QsRUFBQUcsTUFDQXBFLFlBQUEsNkJBQ0FDLFdBQUEsaUJBQ0FDLGFBQUEsYUFDQW1FLEtBQUEsT0FDQUMsT0FBQXRELEtBQUEsU0FBQVksR0FDQXZCLEVBQUFxQyxLQUFBZCIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcsIFsndWkucm91dGVyJywgJ2FwcC51aScsICd1aS5ib290c3RyYXAnXSlcbiAgICAuY29uZmlnKGZ1bmN0aW9uICgkc3RhdGVQcm92aWRlciwgJHVybFJvdXRlclByb3ZpZGVyKSB7XG5cbiAgICAgICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoJy9wcm9qZWN0cycpO1xuXG4gICAgICAkc3RhdGVQcm92aWRlclxuICAgICAgICAuc3RhdGUoJ2xvZ2luJywge1xuICAgICAgICAgIHVybDonL2xvZ2luJyxcbiAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3BhcnRpYWxzL2xvZ2luL2luZGV4Lmh0bWwnLFxuICAgICAgICAgIGNvbnRyb2xsZXI6ICdMb2dpbkNvbnRyb2xsZXInLFxuICAgICAgICAgIGNvbnRyb2xsZXJBczogJ2xvZ2luQ29udHJvbGxlcidcbiAgICAgICAgfSlcblxuICAgICAgICAuc3RhdGUoJ3Byb2plY3RzJywge1xuICAgICAgICAgIHVybDogJy9wcm9qZWN0cycsXG4gICAgICAgICAgdGVtcGxhdGVVcmw6ICdwYXJ0aWFscy9wcm9qZWN0cy9pbmRleC5odG1sJyxcbiAgICAgICAgICBjb250cm9sbGVyOiAnUHJvamVjdHNDb250cm9sbGVyJyxcbiAgICAgICAgICBjb250cm9sbGVyQXM6ICdwcm9qZWN0c0NvbnRyb2xsZXInLFxuICAgICAgICAgIHJlc29sdmU6IHtcbiAgICAgICAgICAgIHByb2plY3RzOiBmdW5jdGlvbiAoUHJvamVjdHMsIHVzZXJzKSB7XG4gICAgICAgICAgICAgIC8vcmV0dXJucyBhIHByb21pc2UsIGNvbnRyb2xsZXIgaXMgY2FsbGVkIHdoZW4gcHJvbWlzZSBpcyByZXNvbHZlZFxuICAgICAgICAgICAgICByZXR1cm4gUHJvamVjdHMuZ2V0KCk7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICB1c2VyczogZnVuY3Rpb24gKFVzZXJzKSB7XG4gICAgICAgICAgICAgIHJldHVybiBVc2Vycy5nZXQoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgIH0gXG4gICAgICAgIH0pXG5cbiAgICAgICAgLnN0YXRlKCdwcm9qZWN0cy5kZXRhaWwnLCB7XG4gICAgICAgICAgdXJsOiAnLzpwcm9qZWN0SWQnLFxuICAgICAgICAgIHRlbXBsYXRlVXJsOiAncGFydGlhbHMvcHJvamVjdHMvZGV0YWlsLmh0bWwnLFxuICAgICAgICAgIGNvbnRyb2xsZXI6ICdQcm9qZWN0Q29udHJvbGxlcicsXG4gICAgICAgICAgY29udHJvbGxlckFzOiAncHJvamVjdENvbnRyb2xsZXInLFxuICAgICAgICAgIHJlc29sdmU6IHtcbiAgICAgICAgICAgIHByb2plY3Q6IGZ1bmN0aW9uIChQcm9qZWN0cywgJHN0YXRlUGFyYW1zLCBwcm9qZWN0cykge1xuICAgICAgICAgICAgICByZXR1cm4gUHJvamVjdHMuZmluZCgkc3RhdGVQYXJhbXMucHJvamVjdElkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IFxuICAgICAgICB9KVxuXG4gICAgICAgIC5zdGF0ZSgncHJvamVjdHMuZGV0YWlsLmVkaXQnLCB7XG4gICAgICAgICAgdXJsOiAnL2VkaXQnLFxuICAgICAgICAgIHRlbXBsYXRlVXJsOiAncGFydGlhbHMvcHJvamVjdHMvZWRpdC5odG1sJyxcbiAgICAgICAgICBjb250cm9sbGVyOiAnUHJvamVjdEVkaXRDb250cm9sbGVyJyxcbiAgICAgICAgICBjb250cm9sbGVyQXM6ICdwcm9qZWN0RWRpdENvbnRyb2xsZXInXG4gICAgICAgIH0pO1xuXG4gICAgfSk7XG59KCkpO1xuIiwiKGZ1bmN0aW9uICgpIHtcblx0J3VzZSBzdHJpY3QnO1xuXG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAudWknLCBbXSk7XG5cbn0oKSk7IiwiXG4oZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuICAgIC5jb250cm9sbGVyKCdCb2R5Q29udHJvbGxlcicsIGZ1bmN0aW9uKFByb2plY3RzKXtcbiAgICAgIHZhciB2bSA9IHRoaXM7XG4gICAgICB2bS53ZWxjb21lID0gJ1N1cCc7XG4gICAgICBcbiAgICAgIFByb2plY3RzLmdldCgpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKHByb2plY3RzKSB7XG4gICAgICAgICAgdm0ucHJvamVjdHMgPSBQcm9qZWN0cy5wcm9qZWN0cztcblx0fSk7XG4gICAgfSk7XG59KCkpO1xuIiwiKGZ1bmN0aW9uICgpIHtcblxuICAndXNlIHN0cmljdCc7XG5cbiAgYW5ndWxhci5tb2R1bGUoJ2FwcC51aScpXG4gICAgLmRpcmVjdGl2ZSgncHJvamVjdHNUYWJsZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHJlc3RyaWN0OiAnRUEnLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ3BhcnRpYWxzL2RpcmVjdGl2ZXMvcHJvamVjdHMtdGFibGUuaHRtbCcsXG4gICAgICAgIHNjb3BlOiB7XG4gICAgICAgICAgcHJvamVjdHM6ICc9JyxcbiAgICAgICAgICByZW1vdmU6ICc9J1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH0pO1xufSgpKTsiLCIoZnVuY3Rpb24gKCkge1xuXG4gICd1c2Ugc3RyaWN0JztcblxuICBhbmd1bGFyLm1vZHVsZSgnYXBwJylcbiAgICAuY29udHJvbGxlcignTG9naW5Db250cm9sbGVyJywgZnVuY3Rpb24gKFVzZXJzKSB7XG4gICAgICB2YXIgdm0gPSB0aGlzO1xuICAgICAgdm0uY3JlZHMgPSB7fTtcbiAgICAgIHZtLmxvZ2luID0gVXNlcnMubG9naW47XG4gICAgfSk7XG59KCkpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4gICAgLnNlcnZpY2UoJ1Byb2plY3RzJywgZnVuY3Rpb24gKCRodHRwLCAkc3RhdGUsIFVzZXJzKSB7XG4gICAgICB2YXIgdm0gPSB0aGlzO1xuICAgICAgdm0ucHJvamVjdHMgPSBbXTtcblxuICAgICAgdm0uZmluZCA9IGZ1bmN0aW9uIGZpbmQocHJvamVjdElkKSB7XG4gICAgICAgIHJldHVybiBfLmZpbmQodm0ucHJvamVjdHMsIHtfaWQ6IHByb2plY3RJZH0pO1xuICAgICAgfTtcblxuICAgICAgdm0uZ2V0ID0gZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvcHJvamVjdHMnKVxuICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgIFx0ICAgIFxuICAgICAgICAgICAgdm0ucHJvamVjdHMuc3BsaWNlKDApO1xuXG4gICAgICBcdCAgICByZXMuZGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChwcm9qZWN0KSB7XG4gICAgICAgICAgICAgICBwcm9qZWN0LnVzZXIgPSBVc2Vycy5maW5kKHByb2plY3QudXNlcik7XG4gICAgXHQgICAgICAgICB2bS5wcm9qZWN0cy5wdXNoKHByb2plY3QpO1xuICAgIFx0ICAgICAgfSk7XG5cbiAgICBcdCAgICAgIHJldHVybiB2bS5wcm9qZWN0cztcbiAgICAgICAgICB9KTtcbiAgICAgIH07XG5cbiAgICAgIHZtLnB1dCA9IGZ1bmN0aW9uIHB1dChwcm9qZWN0Q29weSkge1xuICAgICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgICB0aXRsZTogcHJvamVjdENvcHkudGl0bGUsXG4gICAgICAgICAgdXNlcjogcHJvamVjdENvcHkudXNlci5faWRcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gJGh0dHAucHV0KCcvcHJvamVjdHMvJyArIHByb2plY3RDb3B5Ll9pZCwgZGF0YSlcbiAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICBkZWJ1Z2dlcjtcbiAgICAgICAgICAgIHZhciBwID0gdm0uZmluZChwcm9qZWN0Q29weS5faWQpO1xuICAgICAgICAgICAgXy5tZXJnZShwLCBwcm9qZWN0Q29weSk7XG4gICAgICAgICAgICAkc3RhdGUuZ28oJ3Byb2plY3RzLmRldGFpbCcsIHtwcm9qZWN0SWQ6IHByb2plY3RDb3B5Ll9pZH0pO1xuICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgIC8vVE9ETzogaGFuZGxlIHdoZW4gd2UgY2FuJ3QgdXBkYXRlIGEgcHJvamVjdC5cbiAgICAgICAgICB9KTtcbiAgICAgIH07XG5cbiAgICAgIC8vdGVsbCBzZXJ2ZXIgdG8gZGVsZXRlIChyZW1vdmUpIGZyb20gZGF0YWJhc2VcbiAgICAgIHZtLnJlbW92ZSA9IGZ1bmN0aW9uIHJlbW92ZShwcm9qZWN0SWQpIHtcbiAgICAgICAgIF8ucmVtb3ZlKHZtLnByb2plY3RzLCB7X2lkOiBwcm9qZWN0SWR9KTtcbiAgICAgIH07XG5cbiAgICAgIHZtLmRlbCA9IGZ1bmN0aW9uIGRlbChwcm9qZWN0SWQpIHtcbiAgICAgICAgcmV0dXJuICRodHRwLmRlbGV0ZSgnL3Byb2plY3RzLycgKyBwcm9qZWN0SWQpXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgdm0ucmVtb3ZlKHByb2plY3RJZCk7XG4gICAgICAgICAgICAkc3RhdGUuZ28oJ3Byb2plY3RzJyk7XG4gICAgICAgICAgfSk7XG4gICAgICB9O1xuXG4gICAgICAvL3RlbGwgc2VydmVyIHRvIHBvc3QgKHNhdmUpIHRvIHRoZSBkYXRhYmFzZVxuICAgICAgdm0ucG9zdCA9IGZ1bmN0aW9uIHBvc3QocHJvamVjdCkge1xuICAgICAgICByZXR1cm4gJGh0dHAucG9zdCgnL3Byb2plY3RzLycsIHByb2plY3QpXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgcmVzLmRhdGEudXNlciA9IFVzZXJzLmZpbmQocmVzLmRhdGEudXNlcik7XG4gICAgICAgICAgICB2bS5wcm9qZWN0cy5wdXNoKHJlcy5kYXRhKTtcbiAgICAgICAgICB9KTtcbiAgICAgIH07XG5cbiAgIH0pO1xufSgpKTtcbiIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICBhbmd1bGFyLm1vZHVsZSgnYXBwJylcbiAgICAuc2VydmljZSgnVXNlcnMnLCBmdW5jdGlvbiAoJGh0dHAsIFVzZXIpe1xuICAgICAgdmFyIHZtID0gdGhpcztcbiAgICAgIHZtLnVzZXJzID0gW107XG5cbiAgICAgIHZtLmZpbmQgPSBmdW5jdGlvbiBmaW5kKHVzZXJJZCkge1xuICAgICAgICByZXR1cm4gXy5maW5kKHZtLnVzZXJzLCB7X2lkOiB1c2VySWR9KTtcbiAgICAgIH07XG5cbiAgICAgIC8vZ2V0IHVzZXJzIGZyb20gdGhlIGRhdGFiYXNlXG4gICAgICB2bS5nZXQgPSBmdW5jdGlvbiBnZXQoKXtcbiAgICAgIFx0cmV0dXJuICRodHRwLmdldCgnL3VzZXJzJylcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgICAgIHZtLnVzZXJzLnNwbGljZSgwKTtcbiAgICAgICAgICBcbiAgICAgICAgICAgIHJlcy5kYXRhLmZvckVhY2goZnVuY3Rpb24gKHVzZXIpIHtcblx0ICAgICAgICAgICAgdm0udXNlcnMucHVzaChuZXcgVXNlcih1c2VyKSk7XG5cdCAgICAgICAgfSk7XG5cbiAgICAgICAgXHRyZXR1cm4gdm0udXNlcnM7XG4gICAgXHR9KTtcbiAgICAgIH07XG5cbiAgICAgIHZtLmxvZ2luID0gZnVuY3Rpb24gbG9naW4oY3JlZHMpIHtcbiAgICAgICAgcmV0dXJuICRodHRwLnBvc3QoJy9sb2dpbicsIGNyZWRzKVxuICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcy5kYXRhKTtcbiAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICAgICAgfSk7XG4gICAgICB9O1xuXG4gICAgfSk7XG59KCkpOyIsIihmdW5jdGlvbiAoKSB7XG5cdCd1c2Ugc3RyaWN0JztcblxuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLnVpJylcblx0XHQuZmlsdGVyKCduaWNlRGF0ZScsIGZ1bmN0aW9uICgpIHtcblx0XHRcdHJldHVybiBmdW5jdGlvbiAodGltZVN0YW1wLCBmb3JtYXQpIHtcblx0XHRcdFx0Zm9ybWF0ID0gZm9ybWF0IHx8ICdNTU1NIERvLCBZWVlZJztcblx0XHRcdFx0dmFyIG0gPSBtb21lbnQodGltZVN0YW1wKTtcblx0XHRcdFx0cmV0dXJuIG0uZm9ybWF0KGZvcm1hdCk7XG5cdFx0fTtcblx0XG5cdH0pO1xufSgpKTsiLCIoZnVuY3Rpb24gKCkge1xuXG5cdCd1c2Ugc3RyaWN0JztcblxuXHRhbmd1bGFyLm1vZHVsZSgnYXBwJylcblx0XHQuZmFjdG9yeSgnVXNlcicsIGZ1bmN0aW9uICgpIHtcblx0XHRcdGZ1bmN0aW9uIFVzZXIoZGF0YSkge1xuXHRcdFx0XHRfLm1lcmdlKHRoaXMsIHtcblx0XHRcdFx0XHRmaXJzdF9uYW1lOiAnJyxcblx0XHRcdFx0XHRsYXN0X25hbWU6ICcnLFxuXHRcdFx0XHRcdGVtYWlsOiAnJ1xuXHRcdFx0XHR9LCBkYXRhIHx8IHt9KTtcblx0XHRcdH1cblxuXHRcdFx0VXNlci5wcm90b3R5cGUgPSB7XG5cdFx0XHRcdGZ1bGxOYW1lOiBmdW5jdGlvbiBmdWxsTmFtZSgpIHtcblx0XHRcdFx0XHRyZXR1cm4gdGhpcy5maXJzdF9uYW1lICsgJyAnICsgdGhpcy5sYXN0X25hbWU7XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0XHRyZXR1cm4gVXNlcjtcblxuXHRcdH0pO1xufSgpKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4gICAgLmNvbnRyb2xsZXIoJ05ld1Byb2plY3RDdHJsJywgZnVuY3Rpb24gKCRzY29wZSwgJG1vZGFsSW5zdGFuY2UsIFVzZXJzKXtcbiAgICAgIHZhciB2bSA9IHRoaXM7XG4gICAgICB2bS51c2VycyA9IFVzZXJzLnVzZXJzO1xuICAgICAgdm0ucHJvamVjdCA9IHt1c2VyOiAnJ307XG4gICAgICBcblxuXG4gICAgICB2bS5jbG9zZSA9IGZ1bmN0aW9uIGNsb3NlKCl7XG4gICAgICAgICRtb2RhbEluc3RhbmNlLmNsb3NlKHZtLnByb2plY3QpO1xuXG4gICAgICB9O1xuXG4gICAgICB2bS5kaXNtaXNzID0gZnVuY3Rpb24gZGlzbWlzcygpe1xuICAgICAgICAkbW9kYWxJbnN0YW5jZS5kaXNtaXNzKCk7XG4gICAgICB9O1xuXG4gICAgfSk7XG59KCkpOyIsIihmdW5jdGlvbiAoKSB7XG5cbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuICAgIC5jb250cm9sbGVyKCdQcm9qZWN0RWRpdENvbnRyb2xsZXInLCBmdW5jdGlvbiAocHJvamVjdCwgUHJvamVjdHMsIFVzZXJzKSB7XG4gICAgICB2YXIgdm0gPSB0aGlzO1xuICAgICAgdm0udXNlcnMgPSBVc2Vycy51c2VycztcbiAgICAgIHZtLnByb2plY3QgPSBwcm9qZWN0O1xuICAgICAgdm0ucHJvamVjdENvcHkgPSBfLmNsb25lKHByb2plY3QpO1xuICAgICAgdm0udXBkYXRlID0gUHJvamVjdHMucHV0O1xuICAgIH0pO1xufSgpKTsiLCIoZnVuY3Rpb24gKCkge1xuXG4gICd1c2Ugc3RyaWN0JztcblxuICBhbmd1bGFyLm1vZHVsZSgnYXBwJylcbiAgICAuY29udHJvbGxlcignUHJvamVjdENvbnRyb2xsZXInLCBmdW5jdGlvbiAocHJvamVjdCxQcm9qZWN0cykge1xuICAgICAgdmFyIHZtID0gdGhpcztcbiAgICAgIHZtLnByb2plY3QgPSBwcm9qZWN0O1xuICAgICAgdm0uZGVsID0gUHJvamVjdHMuZGVsO1xuICAgIH0pO1xufSgpKTsiLCIoZnVuY3Rpb24gKCkge1xuXG4gICd1c2Ugc3RyaWN0JztcblxuICBhbmd1bGFyLm1vZHVsZSgnYXBwJylcbiAgICAuY29udHJvbGxlcignUHJvamVjdHNDb250cm9sbGVyJywgZnVuY3Rpb24gKHByb2plY3RzLCBQcm9qZWN0cywgJG1vZGFsLCAkc3RhdGUsICRyb290U2NvcGUpIHtcbiAgICAgIHZhciB2bSA9IHRoaXM7XG4gICAgICB2bS5wcm9qZWN0cyA9IHByb2plY3RzO1xuICAgICAgdm0ucmVtb3ZlID0gUHJvamVjdHMuZGVsO1xuXG4gICAgICAvKiBBZGRpbmcgYSBuZXcgcHJvamVjdCAqL1xuICAgICAgdm0uYWRkUHJvamVjdCA9IGZ1bmN0aW9uIGFkZFByb2plY3QocHJvamVjdCkge1xuICAgICAgICB2YXIgbW9kYWxJbnN0YW5jZSA9ICRtb2RhbC5vcGVuKHtcbiAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3BhcnRpYWxzL3Byb2plY3RzL25ldy5odG1sJyxcbiAgICAgICAgICBjb250cm9sbGVyOiAnTmV3UHJvamVjdEN0cmwnLFxuICAgICAgICAgIGNvbnRyb2xsZXJBczogJ25ld1Byb2plY3QnLFxuICAgICAgICAgIHNpemU6ICdtZCdcbiAgICAgICAgfSkucmVzdWx0LnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgUHJvamVjdHMucG9zdChyZXMpO1xuICAgICAgICAgIH0pO1xuICAgICAgfTtcbiAgICB9KTtcbn0oKSk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
