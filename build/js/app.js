!function(){"use strict";angular.module("app",["ui.router","app.ui","ui.bootstrap"]).config(["$stateProvider","$urlRouterProvider",function(t,e){e.otherwise("/projects"),t.state("projects",{url:"/projects",templateUrl:"partials/projects/index.html",controller:"ProjectsController",controllerAs:"projectsController",resolve:{projects:["Projects","users",function(t,e){return t.get()}],users:["Users",function(t){return t.get()}]}}).state("projects.detail",{url:"/:projectId",templateUrl:"partials/projects/detail.html",controller:"ProjectController",controllerAs:"projectController",resolve:{project:["Projects","$stateParams","projects",function(t,e,r){return t.find(e.projectId)}]}}).state("projects.detail.edit",{url:"/edit",templateUrl:"partials/projects/edit.html",controller:"ProjectEditController",controllerAs:"projectEditController"})}])}(),function(){"use strict";angular.module("app.ui",[])}(),function(){"use strict";angular.module("app").controller("BodyController",["Projects",function(t){var e=this;e.welcome="Sup",t.get().then(function(r){e.projects=t.projects})}])}(),function(){"use strict";angular.module("app.ui").directive("projectsTable",function(){return{restrict:"EA",templateUrl:"partials/directives/projects-table.html",scope:{projects:"=",remove:"="}}})}(),function(){"use strict";angular.module("app").controller("NewProjectCtrl",["$scope","$modalInstance","Users",function(t,e,r){var o=this;o.users=r.users,o.project={user:""},o.close=function(){e.close(o.project)},o.dismiss=function(){e.dismiss()}}])}(),function(){"use strict";angular.module("app").controller("ProjectEditController",["project","Projects","Users",function(t,e,r){var o=this;o.users=r.users,o.project=t,o.projectCopy=_.clone(t),o.update=e.put}])}(),function(){"use strict";angular.module("app").controller("ProjectController",["project","Projects",function(t,e){var r=this;r.project=t,r.del=e.del}])}(),function(){"use strict";angular.module("app").controller("ProjectsController",["projects","Projects","$modal","$state","$rootScope",function(t,e,r,o,n){var s=this;s.projects=t,s.remove=e.del,s.addProject=function(t){r.open({templateUrl:"partials/projects/new.html",controller:"NewProjectCtrl",controllerAs:"newProject",size:"md"}).result.then(function(t){e.post(t)})}}])}(),function(){"use strict";angular.module("app").factory("User",function(){function t(t){_.merge(this,{first_name:"",last_name:"",email:""},t||{})}return t.prototype={fullName:function(){return this.first_name+" "+this.last_name}},t})}(),function(){"use strict";angular.module("app").service("Projects",["$http","$state","Users",function(t,e,r){var o=this;o.projects=[],o.find=function(t){return _.find(o.projects,{_id:t})},o.get=function(){return t.get("/projects").then(function(t){return o.projects.splice(0),t.data.forEach(function(t){t.user=r.find(t.user),o.projects.push(t)}),o.projects})},o.put=function(r){var n={title:r.title,user:r.user._id};return t.put("/projects/"+r._id,n).then(function(t){var n=o.find(r._id);_.merge(n,r),e.go("projects.detail",{projectId:r._id})},function(t){})},o.remove=function(t){_.remove(o.projects,{_id:t})},o.del=function(r){return t["delete"]("/projects/"+r).then(function(t){o.remove(r),e.go("projects")})},o.post=function(e){return t.post("/projects/",e).then(function(t){t.data.user=r.find(t.data.user),o.projects.push(t.data)})}}])}(),function(){"use strict";angular.module("app").service("Users",["$http","User",function(t,e){var r=this;r.users=[],r.find=function(t){return _.find(r.users,{_id:t})},r.get=function(){return t.get("/users").then(function(t){return r.users.splice(0),t.data.forEach(function(t){r.users.push(new e(t))}),r.users})}}])}(),function(){"use strict";angular.module("app.ui").filter("niceDate",function(){return function(t,e){e=e||"MMMM Do, YYYY";var r=moment(t);return r.format(e)}})}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5tb2R1bGUuanMiLCJ1aS5tb2R1bGUuanMiLCJib2R5LmNvbnRyb2xsZXIuanMiLCJkaXJlY3RpdmVzL3Byb2plY3RzLXRhYmxlLmRpcmVjdGl2ZS5qcyIsInByb2plY3RzL25ldy1wcm9qZWN0LmNvbnRyb2xsZXIuanMiLCJwcm9qZWN0cy9wcm9qZWN0LWVkaXQuY29udHJvbGxlci5qcyIsInByb2plY3RzL3Byb2plY3QuY29udHJvbGxlci5qcyIsInByb2plY3RzL3Byb2plY3RzLmNvbnRyb2xsZXIuanMiLCJmYWN0b3JpZXMvdXNlci5mYWN0b3J5LmpzIiwic2VydmljZXMvcHJvamVjdHMuc2VydmljZS5qcyIsInNlcnZpY2VzL3VzZXJzLnNlcnZpY2UuanMiLCJmaWx0ZXJzL2RhdGUuZmlsdGVyLmpzIl0sIm5hbWVzIjpbImFuZ3VsYXIiLCJtb2R1bGUiLCJjb25maWciLCIkc3RhdGVQcm92aWRlciIsIiR1cmxSb3V0ZXJQcm92aWRlciIsIm90aGVyd2lzZSIsInN0YXRlIiwidXJsIiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyIiwiY29udHJvbGxlckFzIiwicmVzb2x2ZSIsInByb2plY3RzIiwiUHJvamVjdHMiLCJ1c2VycyIsImdldCIsIlVzZXJzIiwicHJvamVjdCIsIiRzdGF0ZVBhcmFtcyIsImZpbmQiLCJwcm9qZWN0SWQiLCJ2bSIsInRoaXMiLCJ3ZWxjb21lIiwidGhlbiIsImRpcmVjdGl2ZSIsInJlc3RyaWN0Iiwic2NvcGUiLCJyZW1vdmUiLCIkc2NvcGUiLCIkbW9kYWxJbnN0YW5jZSIsInVzZXIiLCJjbG9zZSIsImRpc21pc3MiLCJwcm9qZWN0Q29weSIsIl8iLCJjbG9uZSIsInVwZGF0ZSIsInB1dCIsImRlbCIsIiRtb2RhbCIsIiRzdGF0ZSIsIiRyb290U2NvcGUiLCJhZGRQcm9qZWN0Iiwib3BlbiIsInNpemUiLCJyZXN1bHQiLCJyZXMiLCJwb3N0IiwiZmFjdG9yeSIsIlVzZXIiLCJkYXRhIiwibWVyZ2UiLCJmaXJzdF9uYW1lIiwibGFzdF9uYW1lIiwiZW1haWwiLCJwcm90b3R5cGUiLCJmdWxsTmFtZSIsInNlcnZpY2UiLCIkaHR0cCIsIl9pZCIsInNwbGljZSIsImZvckVhY2giLCJwdXNoIiwidGl0bGUiLCJwIiwiZ28iLCJlcnIiLCJ1c2VySWQiLCJmaWx0ZXIiLCJ0aW1lU3RhbXAiLCJmb3JtYXQiLCJtIiwibW9tZW50Il0sIm1hcHBpbmdzIjoiQ0FBQSxXQUNBLFlBRUFBLFNBQUFDLE9BQUEsT0FBQSxZQUFBLFNBQUEsaUJBQ0FDLFFBQUEsaUJBQUEscUJBQUEsU0FBQUMsRUFBQUMsR0FFQUEsRUFBQUMsVUFBQSxhQUVBRixFQUNBRyxNQUFBLFlBQ0FDLElBQUEsWUFDQUMsWUFBQSwrQkFDQUMsV0FBQSxxQkFDQUMsYUFBQSxxQkFDQUMsU0FDQUMsVUFBQSxXQUFBLFFBQUEsU0FBQUMsRUFBQUMsR0FFQSxNQUFBRCxHQUFBRSxRQUdBRCxPQUFBLFFBQUEsU0FBQUUsR0FDQSxNQUFBQSxHQUFBRCxXQU1BVCxNQUFBLG1CQUNBQyxJQUFBLGNBQ0FDLFlBQUEsZ0NBQ0FDLFdBQUEsb0JBQ0FDLGFBQUEsb0JBQ0FDLFNBQ0FNLFNBQUEsV0FBQSxlQUFBLFdBQUEsU0FBQUosRUFBQUssRUFBQU4sR0FDQSxNQUFBQyxHQUFBTSxLQUFBRCxFQUFBRSxnQkFLQWQsTUFBQSx3QkFDQUMsSUFBQSxRQUNBQyxZQUFBLDhCQUNBQyxXQUFBLHdCQUNBQyxhQUFBLGdDQzNDQSxXQUNBLFlBRUFWLFNBQUFDLE9BQUEsZ0JDRkEsV0FDQSxZQUNBRCxTQUFBQyxPQUFBLE9BQ0FRLFdBQUEsa0JBQUEsV0FBQSxTQUFBSSxHQUNBLEdBQUFRLEdBQUFDLElBQ0FELEdBQUFFLFFBQUEsTUFFQVYsRUFBQUUsTUFDQVMsS0FBQSxTQUFBWixHQUNBUyxFQUFBVCxTQUFBQyxFQUFBRCxpQkNWQSxXQUVBLFlBRUFaLFNBQUFDLE9BQUEsVUFDQXdCLFVBQUEsZ0JBQUEsV0FDQSxPQUNBQyxTQUFBLEtBQ0FsQixZQUFBLDBDQUNBbUIsT0FDQWYsU0FB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U0FBQXVCLEdBQ0ExQixFQUFBTyxPQUFBUixHQUNBcUIsRUFBQXlCLEdBQUEsZUFLQTdDLEVBQUEyQixLQUFBLFNBQUEvQixHQUNBLE1BQUEwQyxHQUFBWCxLQUFBLGFBQUEvQixHQUNBTyxLQUFBLFNBQUF1QixHQUNBQSxFQUFBSSxLQUFBcEIsS0FBQWYsRUFBQUcsS0FBQTRCLEVBQUFJLEtBQUFwQixNQUNBVixFQUFBVCxTQUFBbUQsS0FBQWhCLEVBQUFJLGVDN0RBLFdBQ0EsWUFFQW5ELFNBQUFDLE9BQUEsT0FDQXlELFFBQUEsU0FBQSxRQUFBLE9BQUEsU0FBQUMsRUFBQVQsR0FDQSxHQUFBN0IsR0FBQUMsSUFDQUQsR0FBQVAsU0FFQU8sRUFBQUYsS0FBQSxTQUFBaUQsR0FDQSxNQUFBakMsR0FBQWhCLEtBQUFFLEVBQUFQLE9BQUE4QyxJQUFBUSxLQUlBL0MsRUFBQU4sSUFBQSxXQUNBLE1BQUE0QyxHQUFBNUMsSUFBQSxVQUNBUyxLQUFBLFNBQUF1QixHQU9BLE1BTkExQixHQUFBUCxNQUFBK0MsT0FBQSxHQUVBZCxFQUFBSSxLQUFBVyxRQUFBLFNBQUEvQixHQUNBVixFQUFBUCxNQUFBaUQsS0FBQSxHQUFBYixHQUFBbkIsTUFHQVYsRUFBQVAsZUN0QkEsV0FDQSxZQUVBZCxTQUFBQyxPQUFBLFVBQ0FvRSxPQUFBLFdBQUEsV0FDQSxNQUFBLFVBQUFDLEVBQUFDLEdBQ0FBLEVBQUFBLEdBQUEsZUFDQSxJQUFBQyxHQUFBQyxPQUFBSCxFQUNBLE9BQUFFLEdBQUFELE9BQUFBIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICBhbmd1bGFyLm1vZHVsZSgnYXBwJywgWyd1aS5yb3V0ZXInLCAnYXBwLnVpJywgJ3VpLmJvb3RzdHJhcCddKVxuICAgIC5jb25maWcoZnVuY3Rpb24gKCRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIpIHtcblxuICAgICAgJHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZSgnL3Byb2plY3RzJyk7XG5cbiAgICAgICRzdGF0ZVByb3ZpZGVyXG4gICAgICAgIC5zdGF0ZSgncHJvamVjdHMnLCB7XG4gICAgICAgICAgdXJsOiAnL3Byb2plY3RzJyxcbiAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3BhcnRpYWxzL3Byb2plY3RzL2luZGV4Lmh0bWwnLFxuICAgICAgICAgIGNvbnRyb2xsZXI6ICdQcm9qZWN0c0NvbnRyb2xsZXInLFxuICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3Byb2plY3RzQ29udHJvbGxlcicsXG4gICAgICAgICAgcmVzb2x2ZToge1xuICAgICAgICAgICAgcHJvamVjdHM6IGZ1bmN0aW9uIChQcm9qZWN0cywgdXNlcnMpIHtcbiAgICAgICAgICAgICAgLy9yZXR1cm5zIGEgcHJvbWlzZSwgY29udHJvbGxlciBpcyBjYWxsZWQgd2hlbiBwcm9taXNlIGlzIHJlc29sdmVkXG4gICAgICAgICAgICAgIHJldHVybiBQcm9qZWN0cy5nZXQoKTtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIHVzZXJzOiBmdW5jdGlvbiAoVXNlcnMpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIFVzZXJzLmdldCgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgfSBcbiAgICAgICAgfSlcblxuICAgICAgICAuc3RhdGUoJ3Byb2plY3RzLmRldGFpbCcsIHtcbiAgICAgICAgICB1cmw6ICcvOnByb2plY3RJZCcsXG4gICAgICAgICAgdGVtcGxhdGVVcmw6ICdwYXJ0aWFscy9wcm9qZWN0cy9kZXRhaWwuaHRtbCcsXG4gICAgICAgICAgY29udHJvbGxlcjogJ1Byb2plY3RDb250cm9sbGVyJyxcbiAgICAgICAgICBjb250cm9sbGVyQXM6ICdwcm9qZWN0Q29udHJvbGxlcicsXG4gICAgICAgICAgcmVzb2x2ZToge1xuICAgICAgICAgICAgcHJvamVjdDogZnVuY3Rpb24gKFByb2plY3RzLCAkc3RhdGVQYXJhbXMsIHByb2plY3RzKSB7XG4gICAgICAgICAgICAgIHJldHVybiBQcm9qZWN0cy5maW5kKCRzdGF0ZVBhcmFtcy5wcm9qZWN0SWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gXG4gICAgICAgIH0pXG5cbiAgICAgICAgLnN0YXRlKCdwcm9qZWN0cy5kZXRhaWwuZWRpdCcsIHtcbiAgICAgICAgICB1cmw6ICcvZWRpdCcsXG4gICAgICAgICAgdGVtcGxhdGVVcmw6ICdwYXJ0aWFscy9wcm9qZWN0cy9lZGl0Lmh0bWwnLFxuICAgICAgICAgIGNvbnRyb2xsZXI6ICdQcm9qZWN0RWRpdENvbnRyb2xsZXInLFxuICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3Byb2plY3RFZGl0Q29udHJvbGxlcidcbiAgICAgICAgfSk7XG5cbiAgICB9KTtcbn0oKSk7XG4iLCIoZnVuY3Rpb24gKCkge1xuXHQndXNlIHN0cmljdCc7XG5cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC51aScsIFtdKTtcblxufSgpKTsiLCJcbihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4gICAgLmNvbnRyb2xsZXIoJ0JvZHlDb250cm9sbGVyJywgZnVuY3Rpb24oUHJvamVjdHMpe1xuICAgICAgdmFyIHZtID0gdGhpcztcbiAgICAgIHZtLndlbGNvbWUgPSAnU3VwJztcbiAgICAgIFxuICAgICAgUHJvamVjdHMuZ2V0KClcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24ocHJvamVjdHMpIHtcbiAgICAgICAgICB2bS5wcm9qZWN0cyA9IFByb2plY3RzLnByb2plY3RzO1xuXHR9KTtcbiAgICB9KTtcbn0oKSk7XG4iLCIoZnVuY3Rpb24gKCkge1xuXG4gICd1c2Ugc3RyaWN0JztcblxuICBhbmd1bGFyLm1vZHVsZSgnYXBwLnVpJylcbiAgICAuZGlyZWN0aXZlKCdwcm9qZWN0c1RhYmxlJywgZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdHJpY3Q6ICdFQScsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAncGFydGlhbHMvZGlyZWN0aXZlcy9wcm9qZWN0cy10YWJsZS5odG1sJyxcbiAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICBwcm9qZWN0czogJz0nLFxuICAgICAgICAgIHJlbW92ZTogJz0nXG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfSk7XG59KCkpOyIsIihmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICBhbmd1bGFyLm1vZHVsZSgnYXBwJylcbiAgICAuY29udHJvbGxlcignTmV3UHJvamVjdEN0cmwnLCBmdW5jdGlvbiAoJHNjb3BlLCAkbW9kYWxJbnN0YW5jZSwgVXNlcnMpe1xuICAgICAgdmFyIHZtID0gdGhpcztcbiAgICAgIHZtLnVzZXJzID0gVXNlcnMudXNlcnM7XG4gICAgICB2bS5wcm9qZWN0ID0ge3VzZXI6ICcnfTtcbiAgICAgIFxuXG5cbiAgICAgIHZtLmNsb3NlID0gZnVuY3Rpb24gY2xvc2UoKXtcbiAgICAgICAgJG1vZGFsSW5zdGFuY2UuY2xvc2Uodm0ucHJvamVjdCk7XG5cbiAgICAgIH07XG5cbiAgICAgIHZtLmRpc21pc3MgPSBmdW5jdGlvbiBkaXNtaXNzKCl7XG4gICAgICAgICRtb2RhbEluc3RhbmNlLmRpc21pc3MoKTtcbiAgICAgIH07XG5cbiAgICB9KTtcbn0oKSk7IiwiKGZ1bmN0aW9uICgpIHtcblxuICAndXNlIHN0cmljdCc7XG5cbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4gICAgLmNvbnRyb2xsZXIoJ1Byb2plY3RFZGl0Q29udHJvbGxlcicsIGZ1bmN0aW9uIChwcm9qZWN0LCBQcm9qZWN0cywgVXNlcnMpIHtcbiAgICAgIHZhciB2bSA9IHRoaXM7XG4gICAgICB2bS51c2VycyA9IFVzZXJzLnVzZXJzO1xuICAgICAgdm0ucHJvamVjdCA9IHByb2plY3Q7XG4gICAgICB2bS5wcm9qZWN0Q29weSA9IF8uY2xvbmUocHJvamVjdCk7XG4gICAgICB2bS51cGRhdGUgPSBQcm9qZWN0cy5wdXQ7XG4gICAgfSk7XG59KCkpOyIsIihmdW5jdGlvbiAoKSB7XG5cbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuICAgIC5jb250cm9sbGVyKCdQcm9qZWN0Q29udHJvbGxlcicsIGZ1bmN0aW9uIChwcm9qZWN0LFByb2plY3RzKSB7XG4gICAgICB2YXIgdm0gPSB0aGlzO1xuICAgICAgdm0ucHJvamVjdCA9IHByb2plY3Q7XG4gICAgICB2bS5kZWwgPSBQcm9qZWN0cy5kZWw7XG4gICAgfSk7XG59KCkpOyIsIihmdW5jdGlvbiAoKSB7XG5cbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuICAgIC5jb250cm9sbGVyKCdQcm9qZWN0c0NvbnRyb2xsZXInLCBmdW5jdGlvbiAocHJvamVjdHMsIFByb2plY3RzLCAkbW9kYWwsICRzdGF0ZSwgJHJvb3RTY29wZSkge1xuICAgICAgdmFyIHZtID0gdGhpcztcbiAgICAgIHZtLnByb2plY3RzID0gcHJvamVjdHM7XG4gICAgICB2bS5yZW1vdmUgPSBQcm9qZWN0cy5kZWw7XG5cbiAgICAgIC8qIEFkZGluZyBhIG5ldyBwcm9qZWN0ICovXG4gICAgICB2bS5hZGRQcm9qZWN0ID0gZnVuY3Rpb24gYWRkUHJvamVjdChwcm9qZWN0KSB7XG4gICAgICAgIHZhciBtb2RhbEluc3RhbmNlID0gJG1vZGFsLm9wZW4oe1xuICAgICAgICAgIHRlbXBsYXRlVXJsOiAncGFydGlhbHMvcHJvamVjdHMvbmV3Lmh0bWwnLFxuICAgICAgICAgIGNvbnRyb2xsZXI6ICdOZXdQcm9qZWN0Q3RybCcsXG4gICAgICAgICAgY29udHJvbGxlckFzOiAnbmV3UHJvamVjdCcsXG4gICAgICAgICAgc2l6ZTogJ21kJ1xuICAgICAgICB9KS5yZXN1bHQudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICBQcm9qZWN0cy5wb3N0KHJlcyk7XG4gICAgICAgICAgfSk7XG4gICAgICB9O1xuICAgIH0pO1xufSgpKTsiLCIoZnVuY3Rpb24gKCkge1xuXG5cdCd1c2Ugc3RyaWN0JztcblxuXHRhbmd1bGFyLm1vZHVsZSgnYXBwJylcblx0XHQuZmFjdG9yeSgnVXNlcicsIGZ1bmN0aW9uICgpIHtcblx0XHRcdGZ1bmN0aW9uIFVzZXIoZGF0YSkge1xuXHRcdFx0XHRfLm1lcmdlKHRoaXMsIHtcblx0XHRcdFx0XHRmaXJzdF9uYW1lOiAnJyxcblx0XHRcdFx0XHRsYXN0X25hbWU6ICcnLFxuXHRcdFx0XHRcdGVtYWlsOiAnJ1xuXHRcdFx0XHR9LCBkYXRhIHx8IHt9KTtcblx0XHRcdH1cblxuXHRcdFx0VXNlci5wcm90b3R5cGUgPSB7XG5cdFx0XHRcdGZ1bGxOYW1lOiBmdW5jdGlvbiBmdWxsTmFtZSgpIHtcblx0XHRcdFx0XHRyZXR1cm4gdGhpcy5maXJzdF9uYW1lICsgJyAnICsgdGhpcy5sYXN0X25hbWU7XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0XHRyZXR1cm4gVXNlcjtcblxuXHRcdH0pO1xufSgpKTsiLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIGFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuICAgIC5zZXJ2aWNlKCdQcm9qZWN0cycsIGZ1bmN0aW9uICgkaHR0cCwgJHN0YXRlLCBVc2Vycykge1xuICAgICAgdmFyIHZtID0gdGhpcztcbiAgICAgIHZtLnByb2plY3RzID0gW107XG5cbiAgICAgIHZtLmZpbmQgPSBmdW5jdGlvbiBmaW5kKHByb2plY3RJZCkge1xuICAgICAgICByZXR1cm4gXy5maW5kKHZtLnByb2plY3RzLCB7X2lkOiBwcm9qZWN0SWR9KTtcbiAgICAgIH07XG5cbiAgICAgIHZtLmdldCA9IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgcmV0dXJuICRodHRwLmdldCgnL3Byb2plY3RzJylcbiAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICBcdCAgICBcbiAgICAgICAgICAgIHZtLnByb2plY3RzLnNwbGljZSgwKTtcblxuICAgICAgXHQgICAgcmVzLmRhdGEuZm9yRWFjaChmdW5jdGlvbiAocHJvamVjdCkge1xuICAgICAgICAgICAgICAgcHJvamVjdC51c2VyID0gVXNlcnMuZmluZChwcm9qZWN0LnVzZXIpO1xuICAgIFx0ICAgICAgICAgdm0ucHJvamVjdHMucHVzaChwcm9qZWN0KTtcbiAgICBcdCAgICAgIH0pO1xuXG4gICAgXHQgICAgICByZXR1cm4gdm0ucHJvamVjdHM7XG4gICAgICAgICAgfSk7XG4gICAgICB9O1xuXG4gICAgICB2bS5wdXQgPSBmdW5jdGlvbiBwdXQocHJvamVjdENvcHkpIHtcbiAgICAgICAgdmFyIGRhdGEgPSB7XG4gICAgICAgICAgdGl0bGU6IHByb2plY3RDb3B5LnRpdGxlLFxuICAgICAgICAgIHVzZXI6IHByb2plY3RDb3B5LnVzZXIuX2lkXG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuICRodHRwLnB1dCgnL3Byb2plY3RzLycgKyBwcm9qZWN0Q29weS5faWQsIGRhdGEpXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgZGVidWdnZXI7XG4gICAgICAgICAgICB2YXIgcCA9IHZtLmZpbmQocHJvamVjdENvcHkuX2lkKTtcbiAgICAgICAgICAgIF8ubWVyZ2UocCwgcHJvamVjdENvcHkpO1xuICAgICAgICAgICAgJHN0YXRlLmdvKCdwcm9qZWN0cy5kZXRhaWwnLCB7cHJvamVjdElkOiBwcm9qZWN0Q29weS5faWR9KTtcbiAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAvL1RPRE86IGhhbmRsZSB3aGVuIHdlIGNhbid0IHVwZGF0ZSBhIHByb2plY3QuXG4gICAgICAgICAgfSk7XG4gICAgICB9O1xuXG4gICAgICAvL3RlbGwgc2VydmVyIHRvIGRlbGV0ZSAocmVtb3ZlKSBmcm9tIGRhdGFiYXNlXG4gICAgICB2bS5yZW1vdmUgPSBmdW5jdGlvbiByZW1vdmUocHJvamVjdElkKSB7XG4gICAgICAgICBfLnJlbW92ZSh2bS5wcm9qZWN0cywge19pZDogcHJvamVjdElkfSk7XG4gICAgICB9O1xuXG4gICAgICB2bS5kZWwgPSBmdW5jdGlvbiBkZWwocHJvamVjdElkKSB7XG4gICAgICAgIHJldHVybiAkaHR0cC5kZWxldGUoJy9wcm9qZWN0cy8nICsgcHJvamVjdElkKVxuICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgIHZtLnJlbW92ZShwcm9qZWN0SWQpO1xuICAgICAgICAgICAgJHN0YXRlLmdvKCdwcm9qZWN0cycpO1xuICAgICAgICAgIH0pO1xuICAgICAgfTtcblxuICAgICAgLy90ZWxsIHNlcnZlciB0byBwb3N0IChzYXZlKSB0byB0aGUgZGF0YWJhc2VcbiAgICAgIHZtLnBvc3QgPSBmdW5jdGlvbiBwb3N0KHByb2plY3QpIHtcbiAgICAgICAgcmV0dXJuICRodHRwLnBvc3QoJy9wcm9qZWN0cy8nLCBwcm9qZWN0KVxuICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgIHJlcy5kYXRhLnVzZXIgPSBVc2Vycy5maW5kKHJlcy5kYXRhLnVzZXIpO1xuICAgICAgICAgICAgdm0ucHJvamVjdHMucHVzaChyZXMuZGF0YSk7XG4gICAgICAgICAgfSk7XG4gICAgICB9O1xuXG4gICB9KTtcbn0oKSk7XG4iLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4gICAgLnNlcnZpY2UoJ1VzZXJzJywgZnVuY3Rpb24gKCRodHRwLCBVc2VyKXtcbiAgICAgIHZhciB2bSA9IHRoaXM7XG4gICAgICB2bS51c2VycyA9IFtdO1xuXG4gICAgICB2bS5maW5kID0gZnVuY3Rpb24gZmluZCh1c2VySWQpIHtcbiAgICAgICAgcmV0dXJuIF8uZmluZCh2bS51c2Vycywge19pZDogdXNlcklkfSk7XG4gICAgICB9O1xuXG4gICAgICAvL2dldCB1c2VycyBmcm9tIHRoZSBkYXRhYmFzZVxuICAgICAgdm0uZ2V0ID0gZnVuY3Rpb24gZ2V0KCl7XG4gICAgICBcdHJldHVybiAkaHR0cC5nZXQoJy91c2VycycpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICAgICB2bS51c2Vycy5zcGxpY2UoMCk7XG4gICAgICAgICAgXG4gICAgICAgICAgICByZXMuZGF0YS5mb3JFYWNoKGZ1bmN0aW9uICh1c2VyKSB7XG5cdCAgICAgICAgICAgIHZtLnVzZXJzLnB1c2gobmV3IFVzZXIodXNlcikpO1xuXHQgICAgICAgIH0pO1xuXG4gICAgICAgIFx0cmV0dXJuIHZtLnVzZXJzO1xuICAgIFx0fSk7XG4gICAgICB9O1xuXG4gICAgfSk7XG59KCkpOyIsIihmdW5jdGlvbiAoKSB7XG5cdCd1c2Ugc3RyaWN0JztcblxuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLnVpJylcblx0XHQuZmlsdGVyKCduaWNlRGF0ZScsIGZ1bmN0aW9uICgpIHtcblx0XHRcdHJldHVybiBmdW5jdGlvbiAodGltZVN0YW1wLCBmb3JtYXQpIHtcblx0XHRcdFx0Zm9ybWF0ID0gZm9ybWF0IHx8ICdNTU1NIERvLCBZWVlZJztcblx0XHRcdFx0dmFyIG0gPSBtb21lbnQodGltZVN0YW1wKTtcblx0XHRcdFx0cmV0dXJuIG0uZm9ybWF0KGZvcm1hdCk7XG5cdFx0fTtcblx0XG5cdH0pO1xufSgpKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
